(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n){function i(){var c=this._type,o=arguments.length,f=window[c],r=arguments,u=r[0],e,t,h,i,s;if(o<1)throw new Error("Minimum 1 argument must be given");else{if(n.isArray(u)){t={};for(i in u){e=u[i];try{t[e]=JSON.parse(f.getItem(e))}catch(l){t[e]=f.getItem(e)}}return t}if(o==1)try{return JSON.parse(f.getItem(u))}catch(l){return f.getItem(u)}else{try{t=JSON.parse(f.getItem(u))}catch(l){throw new ReferenceError(u+" is not defined in this storage");}for(i=1;i<o-1;i++)if(t=t[r[i]],t===undefined)throw new ReferenceError([].slice.call(r,1,i+1).join(".")+" is not defined in this storage");if(n.isArray(r[i])){h=t;t={};for(s in r[i])t[r[i][s]]=h[r[i][s]];return t}return t[r[i]]}}}function u(){var l=this._type,s=arguments.length,f=window[l],e=arguments,u=e[0],o=e[1],r,h=isNaN(o)?{}:[],c,t,i;if(s<1||!n.isPlainObject(u)&&s<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");else{if(n.isPlainObject(u)){for(i in u)r=u[i],n.isPlainObject(r)||this.alwaysUseJson?f.setItem(i,JSON.stringify(r)):f.setItem(i,r);return u}if(s==2)return typeof o=="object"||this.alwaysUseJson?f.setItem(u,JSON.stringify(o)):f.setItem(u,o),o;try{t=f.getItem(u);t!=null&&(h=JSON.parse(t))}catch(a){}for(t=h,i=1;i<s-2;i++)r=e[i],c=isNaN(e[i+1])?"object":"array",t[r]&&(c!="object"||n.isPlainObject(t[r]))&&(c!="array"||n.isArray(t[r]))||(t[r]=c=="array"?[]:{}),t=t[r];return t[e[i]]=e[i+1],f.setItem(u,JSON.stringify(h)),h}}function h(){var h=this._type,e=arguments.length,f=window[h],i=arguments,r=i[0],o,u,t,s;if(e<1)throw new Error("Minimum 1 argument must be given");else{if(n.isArray(r)){for(t in r)f.removeItem(r[t]);return!0}if(e==1)return f.removeItem(r),!0;try{o=u=JSON.parse(f.getItem(r))}catch(c){throw new ReferenceError(r+" is not defined in this storage");}for(t=1;t<e-1;t++)if(u=u[i[t]],u===undefined)throw new ReferenceError([].slice.call(i,1,t).join(".")+" is not defined in this storage");if(n.isArray(i[t]))for(s in i[t])delete u[i[t][s]];else delete u[i[t]];return f.setItem(r,JSON.stringify(o)),!0}}function v(t){var r=f.call(this);for(var i in r)h.call(this,r[i]);if(t)for(i in n.namespaceStorages)a(i)}function c(){var e=arguments.length,o=arguments,u=o[0],r,t;if(e==0)return f.call(this).length==0;if(n.isArray(u)){for(t=0;t<u.length;t++)if(!c.call(this,u[t]))return!1;return!0}try{r=i.apply(this,arguments);n.isArray(o[e-1])||(r={totest:r});for(t in r)if(!(n.isPlainObject(r[t])&&n.isEmptyObject(r[t])||n.isArray(r[t])&&!r[t].length||!r[t]))return!1;return!0}catch(s){return!0}}function l(){var f=arguments.length,e=arguments,u=e[0],r,t;if(f<1)throw new Error("Minimum 1 argument must be given");if(n.isArray(u)){for(t=0;t<u.length;t++)if(!l.call(this,u[t]))return!1;return!0}try{r=i.apply(this,arguments);n.isArray(e[f-1])||(r={totest:r});for(t in r)if(!(r[t]!==undefined&&r[t]!==null))return!1;return!0}catch(o){return!1}}function f(){var f=this._type,e=arguments.length,o=window[f],s=arguments,t=[],n={},r,u;if(n=e>0?i.apply(this,s):o,n&&n._cookie)for(r in Cookies.get())r!=""&&t.push(r.replace(n._prefix,""));else for(u in n)n.hasOwnProperty(u)&&t.push(u);return t}function a(t){if(!t||typeof t!="string")throw new Error("First parameter must be a string");e?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var i={localStorage:n.extend({},n.localStorage,{_ns:t}),sessionStorage:n.extend({},n.sessionStorage,{_ns:t})};return typeof Cookies=="object"&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),i.cookieStorage=n.extend({},n.cookieStorage,{_ns:t})),n.namespaceStorages[t]=i,i}function y(n){var t="jsapi";try{return window[n]?(window[n].setItem(t,t),window[n].removeItem(t),!0):!1}catch(i){return!1}}var o="ls_",s="ss_",e=y("localStorage"),t={_type:"",_ns:"",_callMethod:function(n,t){var i=[],t=Array.prototype.slice.call(t),r=t[0];return this._ns&&i.push(this._ns),typeof r=="string"&&r.indexOf(".")!==-1&&(t.shift(),[].unshift.apply(t,r.split("."))),[].push.apply(i,t),n.apply(this,i)},alwaysUseJson:!1,get:function(){return this._callMethod(i,arguments)},set:function(){var f=arguments.length,e=arguments,t=e[0],i,r;if(f<1||!n.isPlainObject(t)&&f<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(n.isPlainObject(t)&&this._ns){for(i in t)this._callMethod(u,[i,t[i]]);return t}return r=this._callMethod(u,e),this._ns?r[t.split(".")[0]]:r},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(h,arguments)},removeAll:function(n){return this._ns?(this._callMethod(u,[{}]),!0):this._callMethod(v,[n])},isEmpty:function(){return this._callMethod(c,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(l,arguments)},keys:function(){return this._callMethod(f,arguments)}},r;typeof Cookies=="object"&&(window.name||(window.name=Math.floor(Math.random()*1e8)),r={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(n,t){Cookies.set(this._prefix+n,t,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(n){return Cookies.get(this._prefix+n)},removeItem:function(n){return Cookies.remove(this._prefix+n,{path:this._path})},clear:function(){for(var t in Cookies.get())t!=""&&(!this._prefix&&t.indexOf(o)===-1&&t.indexOf(s)===-1||this._prefix&&t.indexOf(this._prefix)===0)&&n.removeCookie(t)},setExpires:function(n){return this._expires=n,this},setPath:function(n){return this._path=n,this},setDomain:function(n){return this._domain=n,this},setConf:function(n){return n.path&&(this._path=n.path),n.domain&&(this._domain=n.domain),n.expires&&(this._expires=n.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}},e||(window.localCookieStorage=n.extend({},r,{_prefix:o,_expires:3650}),window.sessionCookieStorage=n.extend({},r,{_prefix:s+window.name+"_"})),window.cookieStorage=n.extend({},r),n.cookieStorage=n.extend({},t,{_type:"cookieStorage",setExpires:function(n){return window.cookieStorage.setExpires(n),this},setPath:function(n){return window.cookieStorage.setPath(n),this},setDomain:function(n){return window.cookieStorage.setDomain(n),this},setConf:function(n){return window.cookieStorage.setConf(n),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}}));n.initNamespaceStorage=function(n){return a(n)};e?(n.localStorage=n.extend({},t,{_type:"localStorage"}),n.sessionStorage=n.extend({},t,{_type:"sessionStorage"})):(n.localStorage=n.extend({},t,{_type:"localCookieStorage"}),n.sessionStorage=n.extend({},t,{_type:"sessionCookieStorage"}));n.namespaceStorages={};n.removeAllStorages=function(t){n.localStorage.removeAll(t);n.sessionStorage.removeAll(t);n.cookieStorage&&n.cookieStorage.removeAll(t);t||(n.namespaceStorages={})};n.alwaysUseJsonInStorage=function(i){t.alwaysUseJson=i;n.localStorage.alwaysUseJson=i;n.sessionStorage.alwaysUseJson=i;n.cookieStorage&&(n.cookieStorage.alwaysUseJson=i)}})